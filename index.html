<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구몬 학습 | 프리미엄 액티비티</title>
    <meta name="description" content="구몬 학습 전용 프리미엄 디지털 액티비티 시스템">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+KR:wght@300;400;500;700;900&family=Noto+Sans+SC:wght@400;700;900&display=swap"
        rel="stylesheet">

    <!-- Fabric.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <div id="activity-container">
        <!-- Level Navigation Sidebar -->
        <div id="level-nav-sidebar">
            <!-- Dynamic Buttons will be injected here -->
        </div>

        <!-- Navigation Header -->
        <div id="nav-header">
            <button id="btn-prev" class="nav-btn" aria-label="이전 스테이지">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <span id="stage-indicator">STAGE 1</span>
            <button id="btn-next" class="nav-btn" aria-label="다음 스테이지">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Canvas Platform -->
        <div id="canvas-wrapper">
            <canvas id="c"></canvas>
        </div>

        <!-- Dynamic Contextual Controls -->
        <div id="bottom-left-controls">
            <!-- Handwriting Sensitivity Panel -->
            <div id="scale-control" class="ui-panel hidden">
                <div class="control-group">
                    <label class="control-label">입력 감도 (Expansion)</label>
                    <div class="control-row">
                        <select id="zone-scale">
                            <option value="1.1">110%</option>
                            <option value="1.2" selected>120%</option>
                            <option value="1.3">130%</option>
                            <option value="1.4">140%</option>
                            <option value="1.5">150%</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Drag & Drop Customization Panel -->
            <div id="drag-controls" class="ui-panel hidden">
                <div style="display: flex; gap: 24px;">
                    <div class="control-group">
                        <label class="control-label">병음 크기</label>
                        <div class="control-row">
                            <input type="range" id="pinyin-slider" min="20" max="60" value="32">
                            <span id="pinyin-val" class="control-value">32</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">한자 크기</label>
                        <div class="control-row">
                            <input type="range" id="hanja-slider" min="60" max="180" value="120">
                            <span id="hanja-val" class="control-value">120</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Global Action Suite -->
        <div id="action-container">
            <button id="reset-btn" class="btn-action secondary">
                <span style="margin-right: 8px;">↺</span> 초기화
            </button>
            <button id="done-btn" class="btn-action primary">
                완료 <span style="margin-left: 8px;">→</span>
            </button>
        </div>

        <!-- Cheat Key System -->
        <button id="cheat-btn">Cheat Key</button>
        <div id="cheat-panel" class="hidden">
            <div class="cheat-header">
                <span class="cheat-title">(표 1) 빈칸 설정</span>
                <span id="cursor-coords" class="cursor-coords">(0, 0)</span>
            </div>
            <table class="cheat-table">
                <thead>
                    <tr>
                        <th>순서</th>
                        <th>X</th>
                        <th>Y</th>
                        <th>W</th>
                        <th>H</th>
                    </tr>
                </thead>
                <tbody id="cheat-table-body">
                    <!-- Dynamic Rows -->
                </tbody>
            </table>
            <button class="btn-cheat-save" id="cheat-save-btn">SAVE</button>
        </div>
    </div>


    <!-- Application Logic -->
    <script>
        // Use a timestamp to force the browser to load the latest version of stages.js and app.js
        const timestamp = new Date().getTime();
        document.write('<script src="js/stages.js?v=' + timestamp + '"><\/script>');
        document.write('<script src="js/app.js?v=' + timestamp + '"><\/script>');
    </script>
</body>

</html>